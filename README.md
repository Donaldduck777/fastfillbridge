# Букмарклет для автозаполнения формы контракта (LayerZero Helper)

Этот букмарклет предназначен для автоматического заполнения полей на странице взаимодействия со смарт-контрактом (например, на сканере блокчейна типа Etherscan, BscScan и т.д.). Он помогает быстро отправлять транзакции для бриджинга токенов, экономя ваше время и снижая риск ошибок при ручном вводе.

⚠️ **ВАЖНО: ИСПОЛЬЗУЙТЕ НА СВОЙ СТРАХ И РИСК!**
> *   Выполняя этот скрипт, вы доверяете ему свои данные для взаимодействия со смарт-контрактом.
> *   Автор этого README и букмарклета не несет ответственности за возможную потерю средств.
> *   Всегда проверяйте код перед использованием и убедитесь, что вы понимаете, что он делает.
> *   Всегда **внимательно проверяйте** все заполненные поля на странице перед тем, как подписывать транзакцию в кошельке.

## Шаг 1: Подготовка и настройка

Перед использованием букмарклет нужно настроить, указав ваши кошельки.

### 1. Подготовьте ваши адреса

Вам понадобятся два адреса:
1.  **Ваш основной EVM-адрес:** `0x...` (например, из MetaMask).
2.  **Ваш Solana-адрес в формате Hex:** Стандартный Solana-адрес (например, `9x...`) нужно конвертировать.

#### Как конвертировать Solana-адрес в Hex:
1.  Перейдите на сайт [Better-Converter: Base58Check to Hexadecimal](https://www.better-converter.com/Encoders-Decoders/Base58Check-to-Hexadecimal-Decoder).
2.  Вставьте ваш обычный Solana-адрес (начинается не с `0x`) в поле "Input".
3.  Нажмите "Encode".
4.  Скопируйте результат из поля "Hexadecimal". **Вам нужна только сама строка, без префикса `0x`**. Букмарклет добавит его сам.

> **Пример:**
> *   **Ваш Solana-адрес:** `9xABCD...wxyz`
> *   **Результат на сайте:** `89CDEF...WXYZ`
> *   **Адрес для вставки в код:** `0x89CDEF...WXYZ` (добавляем `0x` в начале).

### 2. Отредактируйте код букмарклета

Откройте код букмарклета в любом текстовом редакторе и найдите первые две строки:

```javascript
const t="0xyour_evm_address",e="0x000000000000000000000000"+t.substring(2),o="0xsolana_decoded_address", ...
```

Вам нужно заменить `0xyour_evm_address` и `0xsolana_decoded_address` на ваши адреса.

*   `const t="0xyour_evm_address"`: Замените `0xyour_evm_address` на ваш **EVM-адрес**.
*   `const o="0xsolana_decoded_address"`: Замените `0xsolana_decoded_address` на ваш **Solana-адрес в формате Hex**, полученный на предыдущем шаге.

**Пример до редактирования:**
```javascript
const t="0xyour_evm_address",e="0x000000000000000000000000"+t.substring(2),o="0xsolana_decoded_address", ...
```

**Пример после редактирования:**
```javascript
const t="0x1234567890AbCdEf1234567890AbCdEf12345678",e="0x000000000000000000000000"+t.substring(2),o="0x89CDEFabcd1234567890AbCdEf1234567890AbCdEf", ...
```

Теперь ваш код готов к использованию.

## Шаг 2: Установка букмарклета в браузер

1.  Откройте панель закладок в вашем браузере (обычно `Ctrl+Shift+B` в Chrome/Firefox).
2.  Нажмите правой кнопкой мыши на панели закладок и выберите "Добавить страницу" (или "Добавить закладку").
3.  В открывшемся окне заполните поля:
    *   **Имя (Name):** Введите любое удобное название, например `LZ Filler` или `Автозаполнение формы`.
    *   **URL (Адрес):** Скопируйте **весь ваш отредактированный код букмарклета** (начиная с `javascript:` и до самого конца) и вставьте его в это поле.
4.  Нажмите "Сохранить". На панели закладок появится новая кнопка.

## Шаг 3: Использование

1.  Перейдите на страницу взаимодействия с контрактом (например, на вкладку `Contract -> Write Contract` на Etherscan).
2.  Нажмите на созданную вами закладку (например, `LZ Filler`) на панели закладок.
3.  На экране появятся последовательные окна (prompts):
    *   **"Введите СЕТЬ НАЗНАЧЕНИЯ"**: Введите название сети **заглавными буквами** (например, `SOLANA`, `ARBITRUM`, `OPTIMISM`), или ID сети назначения (можно посмотреть в документации layerzero)
    *   **"Введите КОЛИЧЕСТВО токенов"**: Введите количество токенов в обычном формате (например, `400`). Скрипт сам рассчитает значение с учетом `decimals`.
4.  Скрипт попытается автоматически определить `decimals` токена со страницы. Если не получится, он попросит вас ввести их вручную.
5.  После выполнения вы увидите сообщение: `✅ Готово! Все подходящие поля заполнены.`

✅ **Финальный и самый важный шаг:**
**Внимательно проверьте все автоматически заполненные поля** на странице. Убедитесь, что все адреса, суммы и ID сетей верны. После этого нажмите на странице кнопку "Write" и подтвердите транзакцию в вашем кошельке.

## Как это работает?

*   **Поиск iframe:** Скрипт находит на странице `iframe` с id `writecontractiframe`, где обычно и находится форма.
*   **Запрос данных:** Запрашивает у вас сеть назначения и количество токенов.
*   **Определение Decimals:** Ищет на странице заголовок (`h4.text-cap.mb-1`) с информацией о токене и пытается извлечь из него количество знаков после запятой (`decimals`). Если не находит, запрашивает у вас.
*   **Расчеты:**
    *   Конвертирует введенное вами количество токенов в минимальные единицы (как wei для ETH) с учетом `decimals`.
    *   Рассчитывает комиссию `nativeFee` (в коде жестко задано `0.002` ether).
*   **Заполнение полей:** Находит нужные поля ввода по их `placeholder` и вставляет в них рассчитанные значения.
*   **Выбор адреса:** В зависимости от выбранной сети (`SOLANA` или EVM), подставляет в поле `to (bytes32)` либо ваш заранее сконвертированный Solana-адрес, либо EVM-адрес, дополненный нулями.
*   **Адрес для возврата:** В поле `_refundAddress` подставляет ваш основной EVM-адрес `t`.

### Поддерживаемые сети (из кода)

| Название для ввода | ID Сети | Блокчейн      |
| ------------------ | ------- | ------------- |
| `TAC`              | 30377   | TAC           |
| `SOLANA`           | 30168   | Solana        |
| `ARBITRUM`         | 30110   | Arbitrum      |
| `OPTIMISM`         | 30111   | Optimism      |
| `POLYGON`          | 30109   | Polygon       |
| `AVALANCHE`        | 30106   | Avalanche     |
| `BSC`              | 30102   | BNB Smart Chain |
| `ETHEREUM`         | 30101   | Ethereum      |
| `BASE`             | 30184   | Base          |
| `APTOS`            | 30122   | Aptos         |
| `FANTOM`           | 30112   | Fantom        |
| `CELO`             | 30125   | Celo          |
| `SCROLL`           | 30169   | Scroll        |
| `TRON`             | 30183   | TRON          |
